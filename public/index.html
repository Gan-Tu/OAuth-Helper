<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OAuth Helper</title>
    <style>
      body { font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 2rem auto; max-width: 1000px; display: block; }
      label { display: block; margin-top: 0.75rem; font-weight: 600; }
      input, select, textarea { width: 100%; max-width: 720px; padding: 0.5rem; margin-top: 0.25rem; box-sizing: border-box; }
      button { margin-top: 1rem; padding: 0.6rem 1rem; font-weight: 600; cursor: pointer; }
      .row { display: flex; gap: 0.5rem; align-items: center; flex-wrap: nowrap; }
      .row label { display: inline; margin: 0; font-weight: 500; }
      .row input[type="checkbox"] { margin: 0; }
      .muted { color: #555; font-size: 0.9rem; }
      .box { background: #f6f8fa; padding: 1rem; border-radius: 8px; margin: 1rem 0; }
      .panel { background: #f6f8fa; padding: 1.25rem 1.25rem; border-radius: 10px; border: 1px solid #e5e7eb; }
      pre { background: #111; color: #eaeaea; padding: 1rem; border-radius: 8px; overflow: auto; }
      .two { display: grid; grid-template-columns: 1fr; gap: 1.5rem; }
      a { color: #0366d6; text-decoration: none; }
    </style>
  </head>
  <body>
    <h1>OAuth Helper</h1>
    <p class="muted">Get access and refresh tokens for Google or Dropbox using your own OAuth app credentials.</p>

    <div class="box">
      <h3>Provider Setup</h3>
      <ul>
        <li>
          Google Cloud Console: <a href="https://console.cloud.google.com/auth/clients" target="_blank" rel="noreferrer">Create OAuth client</a>
          <div class="muted">Allowlist redirect URI: <code id="g-redirect"></code></div>
        </li>
        <li>
          Dropbox App Console: <a href="https://www.dropbox.com/developers/apps" target="_blank" rel="noreferrer">Create app</a>
          <div class="muted">Allowlist redirect URI: <code id="d-redirect"></code></div>
        </li>
      </ul>
    </div>

    <div class="two">
      <div class="panel">
        <h2>1) Authorization Code Flow</h2>
        <label for="provider">Provider</label>
        <select id="provider">
          <option value="google">Google</option>
          <option value="dropbox">Dropbox</option>
        </select>

        <label for="client_id">Client ID</label>
        <input id="client_id" placeholder="Paste your Client ID" />

        <label for="client_secret">Client Secret</label>
        <input id="client_secret" placeholder="Paste your Client Secret" />

        <div id="scope-group">
          <label for="scope">Scopes (space-separated; optional)</label>
          <input id="scope" placeholder="Google APIs scopes" value="https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile"/>
        </div>

        
        <br/>
        <button id="start">Start OAuth</button>
        <div id="auth-result"></div>
      </div>

      <div class="panel">
        <h2>2) Refresh Access Token</h2>
        <label for="r_provider">Provider</label>
        <select id="r_provider">
          <option value="google">Google</option>
          <option value="dropbox">Dropbox</option>
        </select>

        <label for="r_client_id">Client ID</label>
        <input id="r_client_id" placeholder="Paste your Client ID" />

        <label for="r_client_secret">Client Secret</label>
        <input id="r_client_secret" placeholder="Paste your Client Secret" />

        <label for="r_refresh_token">Refresh Token</label>
        <textarea id="r_refresh_token" rows="3" placeholder="Paste your refresh token"></textarea>

        <br/>

        <button id="refresh">Get New Access Token</button>
        <div id="refresh-result"></div>
      </div>
    </div>

    <script src="/app.js"></script>
  </body>
  </html>
